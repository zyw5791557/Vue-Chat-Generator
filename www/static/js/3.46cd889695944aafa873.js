webpackJsonp([3],{597:function(t,e,o){"use strict";function a(t){o(616)}Object.defineProperty(e,"__esModule",{value:!0});var s=o(605),i=o.n(s);for(var r in s)"default"!==r&&function(t){o.d(e,t,function(){return s[t]})}(r);var n=o(618),u=o(236),c=a,l=u(i.a,n.a,!1,c,"data-v-25c4abe8",null);e.default=l.exports},603:function(t,e,o){t.exports={default:o(604),__esModule:!0}},604:function(t,e,o){var a=o(28),s=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},605:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(603),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={name:"Login",data:function(){return{tip:"滴滴,学生卡~",form:{username:"",password:""}}},methods:{login:function(){var t=this;this.getApi("login",{method:"post",data:{name:this.form.username,pwd:this.form.password}}).then(function(e){console.log(e);var o=e.data.Code,a=e.data.duration;0===o?(localStorage.removeItem("TouristInfo"),localStorage.setItem("UserInfo",(0,s.default)(e.data.Data)),localStorage.setItem("Duration",a),t.$store.commit("UPDATE_USERINFO",JSON.parse(localStorage.getItem("UserInfo"))),t.$router.push({name:"Chat"}),t.$store.commit("SOCKET_CONNECT")):-1===o&&t.$message.error("账号或密码错误!")}).catch(function(e){t.$message.error("登录失败, 请检查网络连接是否正常。")})},touristsLogin:function(){var t=Date.now(),e={premission:0,name:"游客"+t,avatar:"/static/images/tourist.png",sex:"male",birthday:"2018-02-07",place:"",website:"",github:"",qq:""};localStorage.removeItem("UserInfo"),localStorage.setItem("TouristInfo",(0,s.default)(e)),this.$store.commit("UPDATE_TOURISTINFO",e),this.$router.push({name:"Chat"}),this.$store.commit("SOCKET_CONNECT")},register:function(){this.$router.push({name:"Register"})}},mounted:function(){this.$store.commit("UPDATE_USERINFO",JSON.parse(localStorage.getItem("UserInfo"))),this.$store.commit("UPDATE_TOURISTINFO",JSON.parse(localStorage.getItem("TouristInfo")))}}},616:function(t,e,o){var a=o(617);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(596)("5b734e87",a,!0,{})},617:function(t,e,o){e=t.exports=o(595)(!1),e.push([t.i,".touristsLogin[data-v-25c4abe8]{position:absolute;bottom:0;left:0;height:40px;line-height:40px}",""])},618:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"window"},[o("div",{staticClass:"background"}),t._v(" "),o("div",{staticClass:"login"},[o("div",[t._m(0),t._v(" "),o("div",[o("span",{staticStyle:{position:"relative",top:"-4px"}},[t._v(t._s(t.tip))]),t._v(" "),o("div",{staticClass:"input normal"},[t._m(1),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],attrs:{id:"name",type:"text",placeholder:"用户名"},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"input normal"},[t._m(2),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{id:"pwd",type:"password",placeholder:"密码"},domProps:{value:t.form.password},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(e)},input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),t._v(" "),o("div",[o("span",{on:{click:t.register}},[t._v("注册")]),t._v(" "),o("button",{on:{click:t.login}},[t._v("登录")])]),t._v(" "),o("mu-flat-button",{staticClass:"touristsLogin",attrs:{label:"游客登录",secondary:""},on:{click:t.touristsLogin}})],1)])])])},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("img",{staticClass:"avatar-image",staticStyle:{width:"100px",height:"100px","min-width":"100px","min-height":"100px"},attrs:{src:"/static/images/sleep.gif"}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("i",{staticClass:"icon"},[t._v(" ")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("i",{staticClass:"icon"},[t._v(" ")])])}],i={render:a,staticRenderFns:s};e.a=i}});